DELIMITER //
create procedure check_fine(IN r INT)
BEGIN
    declare no_of_days int;
    declare fine_amt int DEFAULT 0;
    declare d date;
    select date_of_issue into d from Borrower where r=Borrower.roll_no;
    SET no_of_days=DATEDIFF(CURDATE(),d);
    if(no_of_days > 15 and no_of_days<30)then
    SET fine_amt=no_of_days*5;
    elseif(no_of_days>30) then
    set fine_amt=no_of_days*50;
    end if;
    if fine_amt>0 then
    insert into fine(roll_no,Date,amt) VALUES(r,CURDATE(),fine_amt);
    update Borrower set Borrower.status='R' where roll_no=Borrower.roll_no;
    end if;
END//
DELIMITER ;